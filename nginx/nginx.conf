events {
      worker_connections 1024;
  }

  http {
      upstream 318_backend {
          server site-318:80 max_fails=3 fail_timeout=30s;  # 通过服务名访问 318 内部端口
      }
      upstream dt_backend {
          server site-dt:80 max_fails=3 fail_timeout=30s;  # 访问 dt 内部端口
      }
      upstream zhenzhufen_backend {
          server site-zhenzhufen:80 max_fails=3 fail_timeout=30s;  # 访问 zhenzhufen 内部端口
      }

      # 318 服务器块
      server {
          listen 80;
          server_name 318.yongli.wang;  # 替换为您的域名

          location / {
              proxy_pass http://318_backend;
              proxy_set_header Host $host;
              proxy_set_header X-Real-IP $remote_addr;
              proxy_set_header X-Forwarded-For $proxy_add_x_forwarded_for;
          }
      }

      # dt 服务器块
      server {
          listen 80;
          server_name dt.yongli.wang;  # 替换为您的域名

          location / {
              proxy_pass http://dt_backend;
              proxy_set_header Host $host;
              proxy_set_header X-Real-IP $remote_addr;
              proxy_set_header X-Forwarded-For $proxy_add_x_forwarded_for;
          }
      }

      # zhenzhufen 服务器块
      server {
          listen 80;
          server_name zhenzhufen.yongli.wang;  # 替换为您的域名

          location / {
              proxy_pass http://zhenzhufen_backend;
              proxy_set_header Host $host;
              proxy_set_header X-Real-IP $remote_addr;
              proxy_set_header X-Forwarded-For $proxy_add_x_forwarded_for;
          }
      }

      # 默认服务器块（处理未匹配请求）
      server {
          listen 80 default_server;
          return 404;
      }
  }